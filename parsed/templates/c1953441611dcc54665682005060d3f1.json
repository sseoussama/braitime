{"components/cloudnav/cart-meter":"<div class=\"row counter\">\n  <div class=\"tac\">\n    <h3>Almost!</h3>\n    <p></p>\n  </div>\n  <div>\n    <div class=\"counter-in-minicart\">\n      <div class=\"meter js-meter\">\n        <div class=\"meter-bar js-meter-bar\"></div>\n        <div class=\"would\" data-tooltip=\"if this were added\" data-placement=\"bottom\"></div>\n        <div class=\"meter-info\"></div>\n        <div class=\"waypoints\"></div> <!-- ticks added in script -->\n      </div>\n      <div class=\"layers\">\n        <div class=\"layer freeShipping-m\" data-tooltip=\"Free Shipping ($25)\" data-placement=\"bottom\">\n          <span class=\"promo\">Free <i class=\"fa fa-truck\"></i></span>\n        </div>\n      </div> <!-- others added in script -->\n    </div>\n  </div>\n</div>\n\n<!-- <div class=\"layer\" data-tooltip=\"$${gate}\" data-placement=\"bottom\"> <span class=\"promo\">${short}</span> </div> -->\n\n<script>\n  $('.js-meter-bar').unbind();\n  var grand_total =\"{{cart.grand_total.formatted}}\".replace('$','');\n  grand_total = grand_total.replace(',', '');\n  var total = parseFloat(grand_total);\n  var cap = 60;\n  var milestones = []\n\n  total = (total>cap) ? cap : total;\n\n  // progress\n  var progress = grand_total/cap;\n  progress = (progress>1) ? .97*100 : progress*100;\n  \n  // freeShipping\n  newTick('freeShipping', 25, 'Shipping', 'Free Shipping');\n  // newTick('tenOff', 100, '10%', '10% Off');\n  // newTick('twentyOff', 200, '20%', '20% Off', 'left');\n\n\n  // set progress\n  $('.js-meter-bar').css('width', progress+'%');\n\n  // Change Messge if goal reached\n  if(progress>96) {\n    $('.tac h3').text('You Qualify for Free Shipping.')\n  }\n\n  function newTick(name, gate, short, long, placement) {\n    placement = (placement) ? placement : 'bottom';\n    var awarded = (gate<=total);\n    var x = parseFloat((gate/cap)*100)+'%';\n    var t = `<div class=\"layer\" style=\"margin-left:${x}\" data-tooltip=\"${long} ($${gate}+)\" data-placement=\"${placement}\"> <span class=\"promo\">${short}</span> </div>`\n    var manual = $(`.${name}-m`);\n   \n    // place waypoint\n    $('.waypoints').append(`<div class=\"waypoint\" style=\"margin-left:${x}\"></div>`);\n    \n    // append layer or just set margin\n    if (manual.length) {\n      $(`.${name}-m`).css('margin-left',x);\n    }else {\n      $('.layers').append(t);\n    }\n\n    // milestones\n    if(!awarded) {\n      milestones.push({\n        fault: gate-total,\n        msg: `You are $${parseFloat(gate-total).toFixed(2)} away from getting ${long}!`\n      });\n    }\n  }\n\n  function SortByFault(a, b){\n    var aa = a.fault;\n    var bb = b.fault; \n    return ((aa < bb) ? -1 : ((aa > bb) ? 1 : 0));\n  }\n  // milestones.sort(SortByName);\n  // milestones.sort(SortByFault)\n  // $('.tac p').html(milestones[0].msg);\n\n</script>\n\n\n\n\n\n\n\n\n\n\n\n\n\n"}
