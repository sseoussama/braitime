webpackJsonp([9],{424:function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=o(65),r=o(1),l=o.n(r),u=o(161),p=(o.n(u),o(159)),d=function(e){function t(){return n(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.loaded=function(e){l()("body").removeClass("inside"),this.scrolled(),e()},t.prototype.admin=function(){var e=this;p.a.check(function(t){t&&(e.createDropzones(),e.rightClick(),e.rightClick_press())})},t.prototype.scrolled=function(){l()(window).scroll(function(){var e=window.pageYOffset,t=l()("header").height(),o=t,n="-"+l()(".above-nav-info").outerHeight()+"px";e>o?(l()(".above-nav-info").css("margin-top",n),l()("body").addClass("scrolled")):(l()(".above-nav-info").css("margin-top","0px"),l()("body").removeClass("scrolled"))})},t.prototype.pressCar=function(){var e=void 0,t=l()(".pressCar");fb.subscribe("quotes").on("value",function(o){t.html(""),e=o.val(),l.a.each(e,function(e,o){var n='<div class="logo column is-3" data-ref="'+o.href+'" data-id="'+o.id+'" data-quote="'+o.quote+'"> <img class="logo-img" src="'+o.img+'"> </div>';t.append(n)})})},t.prototype.start_press_car=function(e){e.not(".slick-initialized").slick({slidesToShow:5,slidesToScroll:1,autoplay:!0,centerMode:!0,autoplaySpeed:3e3,focusOnSelect:!0,responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:3}}]}),e.on("afterChange",function(e,t,o){var n=t.$slides[o],i=l()(n).attr("data-quote"),a=l()(n).attr("data-ref");l()(".quote.d span").text(i),l()(".quote.d a").attr("href",a)})},t.prototype.rightClick_press=function(){var e=this,t="",o=void 0;l()(".press").bind("contextmenu",function(n){event.preventDefault(),l()('.contextMenu_press input[type="text"]').val(""),l()("ul.contextMenu_press").show().css({top:event.pageY+15,left:event.pageX+10});l()(this).data("zone");if(t=l()(n.target).hasClass("logo-img")){l()('.contextMenu_press input[type="submit"]').removeClass("blue-bg yellow-bg").addClass("green-bg").val("Update");var i=l()(n.target).closest(".logo");o=i.data("id"),e.populate_form(i),l()("input#id").show(),l()(".rmv").show()}else l()('.contextMenu_press input[type="submit"]').removeClass("green-bg blue-bg").addClass("blue-bg").val("Publish"),l()("input#id").hide(),l()(".rmv").hide()}),l()(document).click(function(){0==l()("ul.contextMenu_press").is(":hover")&&l()("ul.contextMenu_press").fadeOut("fast")}),l()("#pressForm").submit(function(o){o.preventDefault(),l()("ul.contextMenu_press").fadeOut("fast"),t?e.press_update(l()(this)):e.press_post(l()(this))}),l()(".rmv").click(function(){fb.remove("quotes/"+o),l()(".rmv").hide(),l()('.contextMenu_press input[type="submit"]').removeClass("blue-bg green-bg").addClass("yellow-bg").val("Undo Delete")})},t.prototype.populate_form=function(e){var t=l()("#pressForm");t.find("#id").val(e.data("id")),t.find("#href").val(e.data("ref")),t.find("#quote").val(e.data("quote")),t.find("#img").val(e.find("img").attr("src"))},t.prototype.press_post=function(e){console.log("post");var t={img:e.find("#img").val(),quote:e.find("#quote").val(),href:e.find("#href").val()};fb.post("quotes/",t)},t.prototype.press_update=function(e){console.log("update");var t={img:e.find("#img").val(),quote:e.find("#quote").val(),href:e.find("#href").val(),id:e.find("#id").val()};fb.write("quotes/"+t.id,t),l()(".contextMenu_press input").val("")},t.prototype.getHomeData=function(){fb.subscribe("home").on("value",function(e){var t=e.val();l()("[data-zone]").each(function(e,o){var n=l()(o).data("zone"),i=t[n].image||null,a=t[n].alt||null,s=t[n].path||null,r=l()(o).find("img"),u=l()(o).find("a");r.attr("src",i),r.attr("alt",a),u.attr("href",s)})})},t.prototype.createDropzones=function(){var e=this,t={url:"/file/post",maxFilesize:5,maxFiles:1,addRemoveLinks:!0,dictResponseError:"Server not Configured",acceptedFiles:".png,.jpg,.gif,.bmp,.jpeg",previewTemplate:l()(".prevv").html(),autoProcessQueue:!0,init:function(){var t=this,o=t.options.el,n=t.options.previewsContainer;t.options.addRemoveLinks=!0,t.options.dictRemoveFile="Delete",t.on("addedfile",function(e){null!=this.files[1]&&this.removeFile(this.files[0])}),t.on("sending",function(t){l()(".meter").show();var i=this;setTimeout(function(){l()(o).find(n+" img").attr("src",t.dataURL),l()(o).find(n).removeClass("hide"),l()(o).find(".button.save").click(function(){e.publish_img(t,o.replace("]","").replace("[","")),i.removeFile(i.files[0])})},1e3)})}};l()("[dz1]").dropzone(Object.assign({el:"[dz1]",previewsContainer:"[upload-preview-dz1]"},t)),l()("[dz2]").dropzone(Object.assign({el:"[dz2]",previewsContainer:"[upload-preview-dz2]"},t)),l()("[dz3]").dropzone(Object.assign({el:"[dz3]",previewsContainer:"[upload-preview-dz3]"},t)),l()("[dz5]").dropzone(Object.assign({el:"[dz5]",previewsContainer:"[upload-preview-dz5]"},t)),l()("[dz6]").dropzone(Object.assign({el:"[dz6]",previewsContainer:"[upload-preview-dz6]"},t)),l()("[dz7]").dropzone(Object.assign({el:"[dz7]",previewsContainer:"[upload-preview-dz7]"},t))},t.prototype.rightClick=function(){var e=this;l()("[data-zone]").bind("contextmenu",function(e){e.preventDefault(),l()("ul.contextMenu").show().css({top:e.pageY+15,left:e.pageX+10});var t=l()(this).data("zone"),o=l()(this).data("dims"),n=l()(this).find("img").attr("src"),i=l()(this).find("img").attr("alt"),a=l()(this).find("a").attr("href");l()("ul.contextMenu span.zone_id").html(t),l()("ul.contextMenu input.zone").val(t),l()("ul.contextMenu p.dims").html(o),l()("ul.contextMenu input.image").val(n),l()("ul.contextMenu input.alt").val(i),l()("ul.contextMenu input.path").val(a)}),l()(document).click(function(){0==l()("ul.contextMenu").is(":hover")&&l()("ul.contextMenu").fadeOut("fast")}),l()("#contextForm").submit(function(t){console.log(t),t.preventDefault(),l()("ul.contextMenu").fadeOut("fast"),e.contextSubmit(l()(this))})},t.prototype.contextSubmit=function(e){var t={zone:e.find('input[name="zone"]').val(),path:e.find('input[name="path"]').val(),image:e.find('input[name="image"]').val(),alt:e.find('input[name="alt"]').val()};console.log("data: ",t),fb.write("home/"+t.zone,t),console.log("submit")},t.prototype.publish_img=function(e,t){console.log(" ==== saving ====> ",e),fb.addImage("home",t,e)},t}(s.a);t.default=d}});
